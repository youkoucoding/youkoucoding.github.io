<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="知识点： RESTful API Best Practise"><title>React17 + ReactHook + TS4 仿Jira项目---学习笔记（四）</title><link rel=canonical href=https://youkoucoding.github.io/p/react17--reacthook--ts4-%E4%BB%BFjira%E9%A1%B9%E7%9B%AE---%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E5%9B%9B/><link rel=stylesheet href=/scss/style.min.css><meta property="og:title" content="React17 + ReactHook + TS4 仿Jira项目---学习笔记（四）"><meta property="og:description" content="知识点： RESTful API Best Practise"><meta property="og:url" content="https://youkoucoding.github.io/p/react17--reacthook--ts4-%E4%BB%BFjira%E9%A1%B9%E7%9B%AE---%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E5%9B%9B/"><meta property="og:site_name" content="技術の手帳"><meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:published_time" content="2021-09-11T15:14:04+09:00"><meta property="article:modified_time" content="2021-09-11T15:14:04+09:00"><meta property="og:image" content="https://youkoucoding.github.io/p/react17--reacthook--ts4-%E4%BB%BFjira%E9%A1%B9%E7%9B%AE---%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E5%9B%9B/cover-for-bestpractise.jpg"><meta name=twitter:title content="React17 + ReactHook + TS4 仿Jira项目---学习笔记（四）"><meta name=twitter:description content="知识点： RESTful API Best Practise"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://youkoucoding.github.io/p/react17--reacthook--ts4-%E4%BB%BFjira%E9%A1%B9%E7%9B%AE---%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E5%9B%9B/cover-for-bestpractise.jpg"><link rel="shortcut icon" href=/img/site-icon.png></head><body class="article-page has-toc"><script>(function(){const e='StackColorScheme';localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t='StackColorScheme',e=localStorage.getItem(t),n=window.matchMedia('(prefers-color-scheme: dark)').matches===!0;e=='dark'||e==='auto'&&n?document.documentElement.dataset.scheme='dark':document.documentElement.dataset.scheme='light'})()</script><div class="container main-container flex
extended"><div id=article-toolbar><a href=https://youkoucoding.github.io/ class=back-home><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="15 6 9 12 15 18"/></svg><span>返回</span></a></div><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/p/react17--reacthook--ts4-%E4%BB%BFjira%E9%A1%B9%E7%9B%AE---%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E5%9B%9B/><img src=/p/react17--reacthook--ts4-%E4%BB%BFjira%E9%A1%B9%E7%9B%AE---%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E5%9B%9B/cover-for-bestpractise_hu51089687c1fc9d12fc6b9e54035b4415_553553_800x0_resize_q75_box.jpg srcset="/p/react17--reacthook--ts4-%E4%BB%BFjira%E9%A1%B9%E7%9B%AE---%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E5%9B%9B/cover-for-bestpractise_hu51089687c1fc9d12fc6b9e54035b4415_553553_800x0_resize_q75_box.jpg 800w, /p/react17--reacthook--ts4-%E4%BB%BFjira%E9%A1%B9%E7%9B%AE---%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E5%9B%9B/cover-for-bestpractise_hu51089687c1fc9d12fc6b9e54035b4415_553553_1600x0_resize_q75_box.jpg 1600w" width=800 height=533 loading=lazy alt="Featured image of post React17 + ReactHook + TS4 仿Jira项目---学习笔记（四）"></a></div><div class=article-details><header class=article-category><a href=/categories/react/>React</a>
<a href=/categories/typescript/>TypeScript</a>
<a href=/categories/restful-api/>RESTful API</a></header><h2 class=article-title><a href=/p/react17--reacthook--ts4-%E4%BB%BFjira%E9%A1%B9%E7%9B%AE---%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E5%9B%9B/>React17 + ReactHook + TS4 仿Jira项目---学习笔记（四）</a></h2><h3 class=article-subtitle>知识点： RESTful API Best Practise</h3><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg><time class=article-time--published>Sep 11, 2021</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--reading>阅读时长: 12 分钟</time></div></footer></div></header><section class=article-content><h1 id=关键知识点六-restful-api-设计的几个最佳实践>关键知识点六： Restful API 设计的几个最佳实践</h1><h2 id=steps-toward-the-glory-of-rest>steps toward the glory of REST</h2><p><a class=link href=https://martinfowler.com/articles/richardsonMaturityModel.html#level0 target=_blank rel=noopener>Richardson Maturity Model</a></p><h3 id=level-0>Level 0</h3><p>The Starting point for the model is using HTTP as a transport system for remote interactions, but without using any of the mechanisms of the web.If you use SOAP or XML-RPC it&rsquo;s basically the same mechanism, the only difference is that you wrap the XML messages in some kind of envelope.</p><h3 id=level-1---resources>Level 1 - Resources</h3><p>At level One, rather than making all the requests to s singular service endpoint, we start talking to <strong>individual resources</strong>.</p><h3 id=level-2---http-verbs-method>Level 2 - Http Verbs (Method)</h3><p>Level 2 moves away from being used as tunneling mechanisms allowing you to tunnel your interactions through HTTP, using the <code>http verbs</code> as closely as possible to how they are used in Http itself.</p><p>HTTP defines <code>GET</code> as a safe operation, that is it doesn&rsquo;t make any significant changes to the state of anything.&mdash; This allows us to invoke GETs safely any number of times in any order and get the same results each time.(<a class=link href=https://developer.mozilla.org/zh-CN/docs/Glossary/Idempotent target=_blank rel=noopener>幂等 - 术语表 | MDN</a>)</p><p>THE KEY elements that are supported by the existence of the web are the strong separation between safe (eg: GET) and non-safe operations, together with using status codes to help communicate the kinds of errors we run into.</p><h3 id=level-3---hypermedia-controls>Level 3 - Hypermedia Controls</h3><p>THE <em>Highest</em> and final level introduces something that you often hear referred to under the おかしい acronym of HATEOAS (Hypertext As The Engine Of Application State).</p><p>Each response has a link element which contains a URI to tell us how to do next, and the URI of the resource we need to manipulate to do it.</p><p>One obvious benefit of hypermedia controls is that it allows the server to change its URI scheme without breaking clients. As long as clients look up the &ldquo;add-test&rdquo; link URI then the server can juggle all URIs other than the initial entrypoint.</p><p>A further benefit is that it helps client developers explore the protocal. The links give client developers a hint as to what may be possible next. AND simillarly it also allows the server team tp advertise new capabilities by putting new links in the responses.</p><p>So as a frontend developer, if we can keeping an eye out for unknown links, these links can be a trgger for further exploration.</p><h2 id=best-practise-最佳实践>Best Practise 最佳实践</h2><h3 id=一-一类资源两个-url---use-two-urls-per-resource>一， 一类资源两个 URL - Use Two URLs per Resource</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1># 资源集合：</span>
</span></span><span class=line><span class=cl>/epics
</span></span><span class=line><span class=cl><span class=c1># 资源元素：</span>
</span></span><span class=line><span class=cl>/epics/5
</span></span></code></pre></div><h3 id=二-使用一致的复数名词---use-consistently-plural-nouns>二， 使用一致的复数名词 - Use Consistently Plural Nouns</h3><p>只应该使用统一的<strong>复数名词</strong>来表达资源</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>GET /stories
</span></span><span class=line><span class=cl>GET /stories/3
</span></span></code></pre></div><h3 id=三-资源-uri-使用名词而不是动词---use-nouns-instead-of-verbs-for-resources>三， 资源 URI 使用名词而不是动词 - Use Nouns instead of Verbs for Resources</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1># wrong</span>
</span></span><span class=line><span class=cl>/getAllEpics
</span></span><span class=line><span class=cl>/getAllFinishedEpics
</span></span><span class=line><span class=cl>/createEpic
</span></span><span class=line><span class=cl>/updateEpic
</span></span></code></pre></div><p><a class=link href=https://phauer.com/2015/restful-api-design-best-practices/#http-methods target=_blank rel=noopener>RESTful API Design.HTTP METHOD</a></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1># right</span>
</span></span><span class=line><span class=cl>GET /epics
</span></span><span class=line><span class=cl>GET /epics?state<span class=o>=</span>finished
</span></span><span class=line><span class=cl>POST /epics
</span></span><span class=line><span class=cl>PUT /epics/5
</span></span></code></pre></div><h3 id=四-将实际数据包装在-data-字段中>四， 将实际数据包装在 data 字段中</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=c1>// GET /epics在数据字段中返回epic资源列表
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;data&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span> <span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span> <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;epic1&#34;</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span> <span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=mi>2</span><span class=p>,</span> <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;epic2&#34;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=c1>// GET /epic/1在数据字段中返回id为1的epic对象
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;data&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;epic1&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><blockquote><p>PUT，POST 和 PATCH 请求的有效负荷(payload)还应包含实际对象的数据字段。</p></blockquote><blockquote><p><a class=link href=https://jsonapi.org/ target=_blank rel=noopener>JSON:API — A specification for building APIs in JSON</a></p></blockquote><h3 id=五-对可选及复杂参数使用查询字符串>五， 对可选及复杂参数使用查询字符串</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1># 保持URL简单, 使用基本URL，将复杂或可选参数移动到查询字符串。</span>
</span></span><span class=line><span class=cl>GET /employees?state<span class=o>=</span>internal<span class=p>&amp;</span><span class=nv>title</span><span class=o>=</span>senior
</span></span><span class=line><span class=cl>GET /employees?id<span class=o>=</span>1,2
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 还可以使用JSON API方式过滤</span>
</span></span><span class=line><span class=cl>GET /employees?filter<span class=o>[</span>state<span class=o>]=</span>internal<span class=p>&amp;</span>filter<span class=o>[</span>title<span class=o>]=</span>senior
</span></span><span class=line><span class=cl>GET /employees?filter<span class=o>[</span>id<span class=o>]=</span>1,2
</span></span></code></pre></div><h3 id=六-使用-http-状态码-status-codes>六， 使用 HTTP 状态码 status codes</h3><p><a class=link href=https://developer.mozilla.org/en-US/docs/Web/HTTP/Status target=_blank rel=noopener>HTTP response status codes - HTTP | MDN</a></p><p>状态码的使用要尽量精确。如果资源可用，但禁止用户访问，则返回 403。如果资源曾经存在但现已被删除或停用，请使用 410。</p><h3 id=七-提供有用的错误消息>七， 提供有用的错误消息</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=c1>// request
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=err>GET</span> <span class=err>/epics?state=unknow</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// response
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;errors&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;status&#34;</span><span class=p>:</span> <span class=mi>400</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;detail&#34;</span><span class=p>:</span> <span class=s2>&#34;Invalid state. Valid values are &#39;biz&#39; or &#39;tech&#39;&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;code&#34;</span><span class=p>:</span> <span class=mi>352</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;links&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;about&#34;</span><span class=p>:</span> <span class=s2>&#34;http://www.jira.com/rest/errorcode/352&#34;</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=八hateoas---provide-links-for-navigating-through-your-api>八，HATEOAS - Provide Links for Navigating through your API</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=c1>// request
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=err>GET</span> <span class=err>/epic</span>
</span></span><span class=line><span class=cl><span class=c1>// 好的做法是在响应中提供客户可以跟进的链接
</span></span></span><span class=line><span class=cl><span class=c1>// response
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;data&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;epic1&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;links&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nt>&#34;story&#34;</span><span class=p>:</span> <span class=s2>&#34;http://www.domain.com/epics/21/stories&#34;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>优点：</p><ol><li>如果 API 被更改，客户端依旧会获取有效的 URL（只要保证在 URL 更改时更新链接）</li><li>API 变得更具自描述性，客户端不必经常查找文档</li></ol><h3 id=九-恰当地设计关系>九， 恰当地设计关系</h3><p>在 API 中设计关系基本上有三种常用选项：链接，侧载和嵌入。</p><p>There are basically three common options to design relationships within an API: <strong>Links</strong>, <strong>Sideloading</strong> and <strong>Embedding</strong>.</p><p>Basically, you should design the relationships depending on the <strong>client&rsquo;s access schema</strong> and the <strong>tolerable request amount</strong> and <strong>payload size</strong>.</p><h4 id=links>Links:</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;data&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;Larry&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;relationships&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;manager&#34;</span><span class=p>:</span> <span class=s2>&#34;http://www.domain.com/employees/1/manager&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;teamMembers&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>          <span class=s2>&#34;http://www.domain.com/employees/12&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>          <span class=s2>&#34;http://www.domain.com/employees/13&#34;</span>
</span></span><span class=line><span class=cl>        <span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=c1>//or &#34;teamMembers&#34;: &#34;http://www.domain.com/employees/1/teamMembers&#34;
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><ul><li><p><em>Small payload size.</em> : It&rsquo;s <strong>good</strong>, if the client doesn&rsquo;t need the manager and the teamManager every time.</p></li><li><p><em>Many Request</em>. : It&rsquo;s <strong>bad</strong>, if nearly every client needs this data. MANY additional requests may be required; in the worse case for every employee.</p></li><li><p>The client has to stitch the data together in order to get the big picture.</p></li></ul><h4 id=sideloading>Sideloading:</h4><p>We can refer to the relationship with a foreign key and put the referred entitiese also in the payload but under the dedicated field <code>included.</code> This approach also called &ldquo;Compound Documents&rdquo;.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;data&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;Larry&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;relationships&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;manager&#34;</span><span class=p>:</span> <span class=mi>5</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;teamMembers&#34;</span><span class=p>:</span> <span class=p>[</span><span class=mi>12</span><span class=p>,</span> <span class=mi>13</span><span class=p>]</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;included&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;manager&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=mi>5</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;Kevin&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;teamMembers&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span> <span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=mi>12</span><span class=p>,</span> <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;Albert&#34;</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span> <span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=mi>13</span><span class=p>,</span> <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;Tom&#34;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>The client may also control the sideloaded entities by a query parameter like <code>GET /employee?include=manager,teamMembers</code>.</p><ul><li>One singel request.</li><li>Tailored payload size. No duplication (e.g. you only deliver a manager once even if he is referenced by many employees).</li><li>The client still has to stitch the data together(拼接数据) in order to resolve the relationships. which can be very cumbersome.</li></ul><h4 id=embedding>Embedding:</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;data&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;Larry&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;manager&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=mi>5</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;Kev&#34;</span>
</span></span><span class=line><span class=cl>      <span class=p>},</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;teamMembers&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span> <span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=mi>12</span><span class=p>,</span> <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;Albert&#34;</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span> <span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=mi>13</span><span class=p>,</span> <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;Tom&#34;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><ul><li><p>Most conveninet for the client. It&rsquo;s can directly follow the relationships to get the actual data.</p></li><li><p>Relationships may be loaded in vain if the client does not need it.</p></li><li><p>Increased payload size and duplications. Referenced entities may be embedded multiple times.(not so good)</p></li></ul><h3 id=十-小驼峰法命名属性---use-camelcase-for-attribute-names>十， 小驼峰法命名属性 - Use CamelCase for Attribute Names</h3><p><code>{"yearOfBirth": 1970}</code></p><p>Don not use underscores or capitalize (year_of_birth or YearOfBirth). Often the RESTful api will be consumed by a client written in JS. Typically the client wil convert the JSON response to a JS object( <code>var person = JSON.parse(response)</code> ) and call its attributes. Therefore, it&rsquo;s a good idea to stick to the JS convention which makes the js code more readable and intuitive.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=c1>// Don&#39;t
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>person</span><span class=p>.</span><span class=nx>year_of_birth</span><span class=p>;</span> <span class=c1>// violates JavaScript convention
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>person</span><span class=p>.</span><span class=nx>YearOfBirth</span><span class=p>;</span> <span class=c1>// suggests constructor method
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// Do
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>person</span><span class=p>.</span><span class=nx>yearOfBirth</span><span class=p>;</span>
</span></span></code></pre></div><h3 id=十一用动词表示操作---use-verbs-for-operations>十一，用动词表示操作 - Use Verbs for Operations</h3><p>有时对 API 调用的响应不涉及资源（如计算，转义或变换）。</p><p>Sometimes a response to an API call does not involve resources (like calculate, translate, or convert)</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=c1>//Reading
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>GET</span> <span class=o>/</span><span class=nx>translate</span><span class=o>?</span><span class=nx>from</span><span class=o>=</span><span class=nx>de_DE</span><span class=o>&amp;</span><span class=nx>to</span><span class=o>=</span><span class=nx>en_US</span><span class=o>&amp;</span><span class=nx>text</span><span class=o>=</span><span class=nx>Hallo</span>
</span></span><span class=line><span class=cl><span class=nx>GET</span> <span class=o>/</span><span class=nx>calculate</span><span class=o>?</span><span class=nx>para2</span><span class=o>=</span><span class=mi>23</span><span class=o>&amp;</span><span class=nx>para2</span><span class=o>=</span><span class=mi>432</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//Trigger an operation that changes the server-side state
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>POST</span> <span class=o>/</span><span class=nx>restartServer</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//no body
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>POST</span> <span class=o>/</span><span class=nx>banUserFromChannel</span>
</span></span><span class=line><span class=cl><span class=p>{</span> <span class=s2>&#34;user&#34;</span><span class=o>:</span> <span class=s2>&#34;123&#34;</span><span class=p>,</span> <span class=s2>&#34;channel&#34;</span><span class=o>:</span> <span class=s2>&#34;serious-chat-channel&#34;</span> <span class=p>}</span>
</span></span></code></pre></div><p>In this case, no resource are involved. Instead, the server executes an operation and returns the result to the client.</p><p>Hence, we shoud use verbs instead of nouns in our URL to distinguish clearly the operations (RPC-style API) from the RESTful endpoints(resources for modelling the domain.)</p><p>Creating those RPC-style API instead of REST is appropriate for operations. Usualy, it&rsquo;s simpler and more intuitive than trying to be REST for operations (e.g. PATCH /server with <code>{"restart": true}</code>). <em>AS the rule of thumb</em>, REST is nice for interacting with domain models and RPC is suitable for operations.</p><blockquote><p><a class=link href=https://www.smashingmagazine.com/2016/09/understanding-rest-and-rpc-for-http-apis/ target=_blank rel=noopener>Understanding RPC Vs REST For HTTP APIs — Smashing Magazine</a></p></blockquote><h3 id=十二-分页-provide-pagination>十二， 分页 Provide Pagination</h3><p>It is almost never a good idea to return the whole data of your db at once.</p><p>Consequently, you should provide a pagination mechanism. There are TWO popular approaches below:</p><ul><li><p>Offset-based Pagination</p></li><li><p>Keyset-based Pagination (Continuation Token) aka CURSOR&mdash;&ndash; recommended.</p></li></ul><h4 id=offset-based>Offset-based</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-fish data-lang=fish><span class=line><span class=cl><span class=c># use the parameters offset and limit, which are well-known from database
</span></span></span><span class=line><span class=cl><span class=c></span>
</span></span><span class=line><span class=cl>/employees?<span class=nv>offset</span><span class=o>=</span><span class=m>30</span><span class=o>&amp;</span><span class=nv>limit</span><span class=o>=</span><span class=m>15</span> <span class=c># returns the employees 30 to 45
</span></span></span><span class=line><span class=cl><span class=c></span>
</span></span><span class=line><span class=cl><span class=c># when the client omits the parameter, the server team should use default(like offset=0 and limit=100)
</span></span></span></code></pre></div><blockquote><p>Never return all resources.</p></blockquote><p>You can provide links for getting the next or previous page. Just construct URLs with the appropriate offset and limit.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>GET /employees?offset<span class=o>=</span>20<span class=p>&amp;</span><span class=nv>limit</span><span class=o>=</span><span class=m>10</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;pagination&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;offset&#34;</span><span class=p>:</span> <span class=mi>20</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;limit&#34;</span><span class=p>:</span> <span class=mi>10</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;total&#34;</span><span class=p>:</span> <span class=mi>3465</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;data&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=c1>//...
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;links&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;next&#34;</span><span class=p>:</span> <span class=s2>&#34;http://www.domain.com/employees?offset=30&amp;limit=10&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;prev&#34;</span><span class=p>:</span> <span class=s2>&#34;http://www.domain.com/employees?offset=10&amp;limit=10&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h4 id=keyset-based-pagination-aka-continuation-token-cursor-recommend>Keyset-based Pagination aka continuation TOKEN, CURSOR (recommend)</h4><p>The presented offset-based pagination is easy to implement but comes with drawbacks. <em>They are slow (SQL’s OFFSET clause becomes very slow for large numbers) and unsafe (it’s easy to miss elements when changes are happening during pagination).</em></p><blockquote><ul><li>SQL’s OFFSET clause becomes very slow for large numbers</li><li>it’s easy to miss elements when changes are happening during pagination</li></ul></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1># That’s why it’s better to use an indexed column.</span>
</span></span><span class=line><span class=cl><span class=c1># Let’s assume that our employees have an indexed column data_created and the collection resource /employees?pageSize=100 returns the oldest 100 employees sorted by this column.</span>
</span></span><span class=line><span class=cl><span class=c1># Client only has to take the dateCreated timestamp of the last employee and uses the query parameter createdSince to continue at this point.</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>GET /employees?pageSize<span class=o>=</span><span class=m>100</span>
</span></span><span class=line><span class=cl><span class=c1># The client receives the oldest 100 employees sorted by `data_created`</span>
</span></span><span class=line><span class=cl><span class=c1># The last employee of the page has the `dataCreated` field  with 1504224000000 (= Sep 1, 2017 12:00:00 AM)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>GET /employees?pageSize<span class=o>=</span>100<span class=p>&amp;</span><span class=nv>createdSince</span><span class=o>=</span><span class=m>1504224000000</span>
</span></span><span class=line><span class=cl><span class=c1># The client receives the next 100 employees since 1504224000000.</span>
</span></span><span class=line><span class=cl><span class=c1># The last employee of the page was created on 1506816000000. And so on.</span>
</span></span></code></pre></div><p>This solves already many of the disadvantages of offset-based pagination, but it’s still not perfect and not very convenient for the client.</p><ul><li>It’s better to create a so-called continuation token by adding additional information (like the id) to the date in order to improve the reliability and efficiency.</li><li>Moreover, you should provide a dedicated field in the payload for that token so the client doesn’t have to figure it out by looking at the elements. You can even go further and provide a next link.</li></ul><blockquote><p><a class=link href=https://phauer.com/2018/web-api-pagination-timestamp-id-continuation-token/ target=_blank rel=noopener>Web API Pagination with the &lsquo;Timestamp_ID&rsquo; Continuation Token</a></p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=c1>// request
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=err>GET</span> <span class=err>/employees?pageSize=</span><span class=mi>100</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// response
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;pagination&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;continuationToken&#34;</span><span class=p>:</span> <span class=s2>&#34;1504224000000_10&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;data&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=c1>// ...
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// last element:
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>{</span> <span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=mi>10</span><span class=p>,</span> <span class=nt>&#34;dateCreated&#34;</span><span class=p>:</span> <span class=mi>1504224000000</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;links&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;next&#34;</span><span class=p>:</span> <span class=s2>&#34;http://www.domain.com/employees?pageSize=100&amp;continue=1504224000000_10&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>The <code>next</code> link makes the API RESTful as the client can page through the collection simply by following these links(HATEOAS). No need to construct URLs manually. Moreover, we can simply change the URL structure without breaking clients( called evolvability)</p><h3 id=十三-check-out-jsonapi>十三， Check out JSON:API</h3><blockquote><p><a class=link href=https://jsonapi.org/ target=_blank rel=noopener>JSON:API — A specification for building APIs in JSON</a></p></blockquote><p>Just for Inspiration. Feel free to make up your own mind about JSON:API.</p><h3 id=十四-确保-api-的可演进-ensure-evolvability-of-the-apis>十四， 确保 API 的可演进 Ensure Evolvability of the APIs</h3><h4 id=avoid-breaking-changes>Avoid Breaking Changes</h4><p>Ideally, APIs should be stable. Basically, breaking changes should not happen.(like change the whole payload format or the URL scheme). SO how can we still evolve our API without breaking the clients:</p><ul><li><p>保持向后兼容 Make backward-compatible changes.Adding field is no problem, as long as the clients are tolerant.</p></li><li><p>复制和弃用。Duplication and Deprecation. In order to cahnge an existing field, you can add the new one next to the old field and deprecated the old one in the documentation. After a while, you can remove the old field.</p></li><li><p>超媒体和 HATEOAS。Utilize Hypermedia and HATEOAS. As long as the API client uses the links in the response to navigate through the API (and doesn’t craft the URLs manually), you can safely change the URLs without breaking the clients.</p></li><li><p>使用新名称创建新资源。Create new resources with new names. If new business requirements lead to a completely new domain model and workflows, you can create new resources. That’s often quite intuitive as the domain model has a new name anyway (derived from the business name). Example: A rental service now also rents bikes and segways. So the old concept car with the resource /cars doesn’t cut it anymore. A new domain model vehicle with a new resource /vehicles is introduced. It’s provided along with the old /cars resource.</p></li></ul><h4 id=keep-bussiness-logic-on-the-server-side>Keep Bussiness Logic on the Server-Side</h4><p>DO not let our service become <em>a dump data access layer</em> which provides CRUD functionality by directly exposing your databaes model. <strong>THIS creates HIGH COUPLING.</strong></p><ul><li><p>The bussiness logic is shifted to the client and is often replicated between the client and the server (just think about validation.). We have to keep both in sync.</p></li><li><p>The client will be coupling to the server&rsquo;s database model. This is not good.</p></li><li><p>The business workflows are getting distributed between the client and the server. IN TURN, that makes it likely that new business requirements require a change in both the client and the server and to break API. So the API/system is not that evolvable.</p></li></ul><p>因此，我们应该构建高层次/基于工作流的 API 而不是低级 API。 So we should build high-level/workflow-based APIs instead of low-level APIs. EXAMPLE:</p><p><strong>Don’t provide a simple CRUD service for the order entities in the database.</strong></p><p><strong>Don’t require the clients to know that to cancel an order, the client has to PUT an order to the generic /order/1 resource with a certain cancelation payload (reflecting the database model) in it. This leads to high coupling (business logic and domain knowledge on the client-side; exposed database model).</strong></p><p><strong>Instead, provide a dedicated resource /order/1/cancelation and add a link to it in the payload of the order resource. The client can navigate to the cancelation URL and send a tailored cancelation payload. The business logic for mapping this payload to the database model is done in the server.</strong></p><p><strong>Moreover, the server can easily change the URL without breaking the client, because the client simply follows links. Besides, the decision logic, if an order can be canceled or not is now in the server: If a cancelation a possible the server adds the link to the cancelation resource in the order payload. So the client only has to check if the cancelation links are present (for example to know if he should draw the cancelation button). So we moved domain knowledge away from the client back to the server. Changes to the cancelation conditions can be easily applied by only touching the server, which in turn make the system evolvable. No API change is required.</strong></p><h3 id=十五版本化-consider-api-versioning>十五，版本化 Consider API Versioning</h3><p>Nevertheless, you might end up in situations where the above approaches don’t work and you really have to provide different versions of your API.</p><p>Nevertheless, here are the two most popular approaches for versioning:</p><ul><li><p>Versioning via URLs: <code>/v1/</code></p></li><li><p>Versioning via the <code>Accept</code> HTTP Header:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl> Accept:
</span></span><span class=line><span class=cl> application/vnd.myapi.v1+json
</span></span></code></pre></div></li></ul><h4 id=versioning-via-urls>Versioning via URLs</h4><p>Just put the version number of your API in the URL of every resource. <code>/v1/books</code>.</p><ul><li><p>Pros:</p><ul><li>Extremely simple for API developers.</li><li>Extremely simple for API clients.</li><li>URLs can be copied and pasted.</li></ul></li><li><p>Cons:</p><ul><li>Not RESTful</li><li>Breaking URLs. clients have to maintain and update the URLs.</li></ul></li></ul><blockquote><p>Strictly speaking, this approach is not RESTful because URLs should never change.The question is, how much effort would it take the clients to update the URLs? If the answer is “only a little” then URL versioning might be fine.</p></blockquote><h4 id=versioning-via-accept-http-header-content-negotiation>Versioning via <code>Accept</code> HTTP Header (Content Negotiation)</h4><ul><li><p>Pros:</p><ul><li>URLs keep the same</li><li>Considered as RESTful</li><li>HATEOAS-friendly</li></ul></li><li><p>Cons:</p><ul><li>Slightly more difficult to use. Clients have to pay attention to the headers.</li><li>URLs can’t be copied and pasted anymore.</li></ul></li></ul><h2 id=reference>Reference</h2><p><a class=link href=https://martinfowler.com/articles/richardsonMaturityModel.html#level0 target=_blank rel=noopener>Richardson Maturity Model</a></p><p><a class=link href=http://kaelzhang81.github.io/2019/05/24/Restful-API%E8%AE%BE%E8%AE%A1%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/ target=_blank rel=noopener>Restful API 设计最佳实践 - Tech For Fun</a></p><p><a class=link href=https://phauer.com/2015/restful-api-design-best-practices/ target=_blank rel=noopener>RESTful API Design. Best Practices in a Nutshell.</a></p><p><a class=link href="https://www.youtube.com/watch?v=mQkf85S9UoQ&t=1s" target=_blank rel=noopener>REST beyond the obvious – API design for ever evolving systems by Oliver Gierke @ Spring I/O 2018 - YouTube</a></p></section><footer class=article-footer><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg><span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-contents--wrapper><h2 class=section-title>相关文章</h2><div class=related-contents><div class="flex article-list--tile"><article class=has-image><a href=/p/react17--reacthook--ts4-%E4%BB%BFjira%E9%A1%B9%E7%9B%AE---%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B8%89/><div class=article-image><img src=/p/react17--reacthook--ts4-%E4%BB%BFjira%E9%A1%B9%E7%9B%AE---%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B8%89/restful-design.4a24f2cf21cbfc9b02525421ccd076d5_hu2eb9b4a82207ed27ffff0ff503057274_1353210_250x150_fill_q75_box_smart1.jpg width=250 height=150 loading=lazy data-key data-hash="md5-SiTyzyHL/JsCUlQhzNB21Q=="></div><div class=article-details><h2 class=article-title>React17 + ReactHook + TS4 仿Jira项目---学习笔记（三）</h2></div></a></article><article class=has-image><a href=/p/react17--reacthook--ts4-%E4%BB%BFjira%E9%A1%B9%E7%9B%AE---%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BA%8C/><div class=article-image><img src=/p/react17--reacthook--ts4-%E4%BB%BFjira%E9%A1%B9%E7%9B%AE---%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BA%8C/cover-api.b89eee8a30367aeaea2ecfd7c578cefb_hud4b58edf642f350337f29ff97407729b_1122407_250x150_fill_q75_box_smart1.jpg width=250 height=150 loading=lazy data-key data-hash="md5-uJ7uijA2eurqLs/XxXjO+w=="></div><div class=article-details><h2 class=article-title>React17 + ReactHook + TS4 仿Jira项目---学习笔记（二）</h2></div></a></article><article class=has-image><a href=/p/react17--reacthook--ts4-%E4%BB%BFjira%E9%A1%B9%E7%9B%AE---%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E5%85%AD/><div class=article-image><img src=/p/react17--reacthook--ts4-%E4%BB%BFjira%E9%A1%B9%E7%9B%AE---%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E5%85%AD/liftup-cover.e43b244f464470c1358bf2587fc9db84_hu13e64fc3938bf48c35bf882b9c49b497_2861451_250x150_fill_q75_box_smart1.jpg width=250 height=150 loading=lazy data-key data-hash="md5-5DskT0ZEcME1i/JYf8nbhA=="></div><div class=article-details><h2 class=article-title>React17 + ReactHook + TS4 仿Jira项目---学习笔记（六）</h2></div></a></article><article class=has-image><a href=/p/react17--reacthook--ts4-%E4%BB%BFjira%E9%A1%B9%E7%9B%AE---%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BA%94/><div class=article-image><img src=/p/react17--reacthook--ts4-%E4%BB%BFjira%E9%A1%B9%E7%9B%AE---%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BA%94/throttle-cover.689c9e4cdea4b9e0b382f6f3c24b6f34_huce846bc90c63bb66fde6ebec9b941b5a_4551878_250x150_fill_q75_box_smart1.jpg width=250 height=150 loading=lazy data-key data-hash="md5-aJyeTN6kueCzgvbzwktvNA=="></div><div class=article-details><h2 class=article-title>React17 + ReactHook + TS4 仿Jira项目---学习笔记（五）</h2></div></a></article><article class=has-image><a href=/p/react17--reacthook--ts4-%E4%BB%BFjira%E9%A1%B9%E7%9B%AE---%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B8%80/><div class=article-image><img src=/p/react17--reacthook--ts4-%E4%BB%BFjira%E9%A1%B9%E7%9B%AE---%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B8%80/react-jira-cover.f35a158e545cb9f3d52a367692e597aa_hu6fb94db3450be5959357d7afb44e190b_2444740_250x150_fill_q75_box_smart1.jpg width=250 height=150 loading=lazy data-key data-hash="md5-81oVjlRcufPVKjZ2kuWXqg=="></div><div class=article-details><h2 class=article-title>React17 + ReactHook + TS4 仿Jira项目---学习笔记（一）</h2></div></a></article></div></div></aside><footer class=site-footer><section class=copyright>&copy;
2021 -
2022 技術の手帳</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.2.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css integrity="sha256-c0uckgykQ9v5k+IqViZOZKc47Jn7KQil4/MP3ySA3F8=" crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE=" crossorigin=anonymous></main><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">目录</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#steps-toward-the-glory-of-rest>steps toward the glory of REST</a><ol><li><a href=#level-0>Level 0</a></li><li><a href=#level-1---resources>Level 1 - Resources</a></li><li><a href=#level-2---http-verbs-method>Level 2 - Http Verbs (Method)</a></li><li><a href=#level-3---hypermedia-controls>Level 3 - Hypermedia Controls</a></li></ol></li><li><a href=#best-practise-最佳实践>Best Practise 最佳实践</a><ol><li><a href=#一-一类资源两个-url---use-two-urls-per-resource>一， 一类资源两个 URL - Use Two URLs per Resource</a></li><li><a href=#二-使用一致的复数名词---use-consistently-plural-nouns>二， 使用一致的复数名词 - Use Consistently Plural Nouns</a></li><li><a href=#三-资源-uri-使用名词而不是动词---use-nouns-instead-of-verbs-for-resources>三， 资源 URI 使用名词而不是动词 - Use Nouns instead of Verbs for Resources</a></li><li><a href=#四-将实际数据包装在-data-字段中>四， 将实际数据包装在 data 字段中</a></li><li><a href=#五-对可选及复杂参数使用查询字符串>五， 对可选及复杂参数使用查询字符串</a></li><li><a href=#六-使用-http-状态码-status-codes>六， 使用 HTTP 状态码 status codes</a></li><li><a href=#七-提供有用的错误消息>七， 提供有用的错误消息</a></li><li><a href=#八hateoas---provide-links-for-navigating-through-your-api>八，HATEOAS - Provide Links for Navigating through your API</a></li><li><a href=#九-恰当地设计关系>九， 恰当地设计关系</a><ol><li><a href=#links>Links:</a></li><li><a href=#sideloading>Sideloading:</a></li><li><a href=#embedding>Embedding:</a></li></ol></li><li><a href=#十-小驼峰法命名属性---use-camelcase-for-attribute-names>十， 小驼峰法命名属性 - Use CamelCase for Attribute Names</a></li><li><a href=#十一用动词表示操作---use-verbs-for-operations>十一，用动词表示操作 - Use Verbs for Operations</a></li><li><a href=#十二-分页-provide-pagination>十二， 分页 Provide Pagination</a><ol><li><a href=#offset-based>Offset-based</a></li><li><a href=#keyset-based-pagination-aka-continuation-token-cursor-recommend>Keyset-based Pagination aka continuation TOKEN, CURSOR (recommend)</a></li></ol></li><li><a href=#十三-check-out-jsonapi>十三， Check out JSON:API</a></li><li><a href=#十四-确保-api-的可演进-ensure-evolvability-of-the-apis>十四， 确保 API 的可演进 Ensure Evolvability of the APIs</a><ol><li><a href=#avoid-breaking-changes>Avoid Breaking Changes</a></li><li><a href=#keep-bussiness-logic-on-the-server-side>Keep Bussiness Logic on the Server-Side</a></li></ol></li><li><a href=#十五版本化-consider-api-versioning>十五，版本化 Consider API Versioning</a><ol><li><a href=#versioning-via-urls>Versioning via URLs</a></li><li><a href=#versioning-via-accept-http-header-content-negotiation>Versioning via <code>Accept</code> HTTP Header (Content Negotiation)</a></li></ol></li></ol></li><li><a href=#reference>Reference</a></li></ol></nav></div></section></aside></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g=" crossorigin=anonymous defer></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const e=document.createElement('link');e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>